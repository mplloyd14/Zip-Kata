!function(a,b){"use strict";b["true"]=a,angular.module("evo.templates").run(["$templateCache",function(a){a.put("client/about/about.html",'<div id="evo-about-container" ng-show="isOpen"> <div class="modal"> <div class="modal-dialog"> <div class="modal-content"> <div class="modal-header"> <img ng-src="{{ logo }}" ng-show="logo.length"> <h3>{{ "txtAbout" | i18n }}</h3> </div> <!-- /.modal-header --> <div class="modal-body"> <div class="evo-about-product"> <h4>{{ productTitle }}</h4> <ul> <li class="evo-about-version"> <label>{{ "lblProductVersion" | i18n }}:</label>&nbsp;{{ meta.build.app.version }} </li> <li class="evo-about-date"> <label>{{ "lblProductBuildDate" | i18n }}:</label>&nbsp;{{ meta.build.app.date | date: "longDate" }} </li> </ul> </div> <!-- /.evo-about-product --> <div class="evo-about-core"> <h4>Core</h4> <ul> <li class="evo-about-version"> <label>{{ "lblCoreLibraryVersion" | i18n }}:</label>&nbsp;{{ meta.build.core.version }} </li> <li class="evo-about-date"> <label>{{ "lblCoreLibraryBuildDate" | i18n }}:</label>&nbsp;{{ meta.build.core.date | date: "longDate" }} </li> </ul> </div> <!-- /.evo-about-core --> </div> <!-- /.modal-body --> <div class="modal-footer"> <button class="btn btn-primary evo-btn-primary" ng-click="closeModal()">{{ "txtClose" | i18n }}</button> </div> <!-- /.modal-footer --> </div> </div> </div> <!-- /.modal --> <div class="modal-backdrop"></div> </div> <!-- /#evo-about-modal -->')}]),angular.module("evo.api",["evo.utils","evo.user","evo.client.config"]),angular.module("evo.api").factory("evoAPIErrors",[function(){var a={5:"Timeout calling server"},b={};return b.getByCode=function(b,c){return{errorNum:b,errorMsg:a[b]||c}},b}]).factory("evoAPI",["$log","$rootScope","$timeout","$q","$window","evoUser","evoConfig","evoUtils","evoAPIErrors",function(a,b,c,d,e,f,g,h,i){function j(c){n.hasOwnProperty(c.id)&&(a.error("Call timed out: "+n[c.id].name),b.$apply(n[c.id].deferred.reject(i.getByCode(5))),delete n[c.id])}function k(a){a.timeout=c(function(){j(a)},r),q.write(a)}if(!e.Primus)throw new Error("Required third-party library 'Primus' is missing.");var l={},m=!1,n={},p=[],q=e.Primus.connect(g.get("socket_server")+":"+g.get("socket_port")),r=g.get("socket_timeout",4e3),s=c(function(){angular.forEach(p,j),p=[],m=!0,a.error("Socket connection timed out.")},r);return q.on("open",function(){a.info("Primus socket connection initialized."),angular.forEach(p,k),p=[],m=!0,c.cancel(s)}),q.on("data",function(d){a.info("Primus socket data recv."),n.hasOwnProperty(d.id)?(c.cancel(d.timeout),b.$apply(d.result&&d.result.hasOwnProperty("errorNum")?n[d.id].deferred.reject(d):d.result&&d.result.hasOwnProperty("errno")?n[d.id].deferred.reject(i.getByCode(o.result.errno,o.result.code)):n[d.id].deferred.resolve(d)),delete n[d.id]):d.event&&d.message&&b.$emit(d.event,d.message)}),l.callFunction=function(a,b){var c=d.defer(),e={id:h.getRandString(10),name:a,params:b,user:f.data,context:f.context};return n[e.id]={deferred:c,name:a},m?k(e):p.push(e),c.promise},l}]),angular.module("evo.client.about").directive("evoAboutModal",["evoAbout",function(a){return{restrict:"E",templateUrl:"client/about/about.html",link:function(b,c,d){b.productTitle=d.productTitle,b.logo=d.logo,b.meta=a.meta,b.closeModal=a.closeModal,b.$watch(function(){return a.isOpen},function(){b.isOpen=arguments[0]})}}}]),angular.module("evo.client.about",["evo.client.config"]),angular.module("evo.client.about").service("evoAbout",["$window","evoConfig",function(a,b){if(!a.moment)throw new Error("Missing third-party library 'Moment'.");var c=this;c.meta=b.get("meta",{});try{c.meta.build.core.date=moment(c.meta.build.core.date,"YYYY-MM-DD HH:mm:ss Z").toDate(),c.meta.build.app.date=moment(c.meta.build.app.date,"YYYY-MM-DD HH:mm:ss Z").toDate()}catch(d){}c.openModal=function(){c.isOpen||(c.isOpen=!0)},c.closeModal=function(){c.isOpen&&(c.isOpen=0)}}]),angular.module("evo.client.browser",[]),angular.module("evo.client.browser").factory("evoBrowser",[function(){function a(a){for(var b=0,c=a[b];c=a[b++];)if(f=c.versionSearch||c.identity,c.string&&-1!==c.string.indexOf(c.subString)||c.prop)return c.identity;return null}function b(a){var b=a.indexOf(f);return-1!==b?parseFloat(a.substring(b+f.length+1)):null}var c=[{string:navigator.userAgent,subString:"Chrome",identity:"Chrome"},{string:navigator.userAgent,subString:"OmniWeb",versionSearch:"OmniWeb/",identity:"OmniWeb"},{string:navigator.vendor,subString:"Apple",identity:"Safari",versionSearch:"Version"},{prop:window.opera,identity:"Opera",versionSearch:"Version"},{string:navigator.vendor,subString:"iCab",identity:"iCab"},{string:navigator.vendor,subString:"KDE",identity:"Konqueror"},{string:navigator.userAgent,subString:"Firefox",identity:"Firefox"},{string:navigator.vendor,subString:"Camino",identity:"Camino"},{string:navigator.userAgent,subString:"Netscape",identity:"Netscape"},{string:navigator.userAgent,subString:"MSIE",identity:"Explorer",versionSearch:"MSIE"},{string:navigator.userAgent,subString:"Gecko",identity:"Mozilla",versionSearch:"rv"},{string:navigator.userAgent,subString:"Mozilla",identity:"Netscape",versionSearch:"Mozilla"}],d=[{string:navigator.platform,subString:"Win",identity:"Windows"},{string:navigator.platform,subString:"Mac",identity:"Mac"},{string:navigator.userAgent,subString:"iPhone",identity:"iPhone/iPod"},{string:navigator.platform,subString:"Linux",identity:"Linux"}],e={},f="";return e.browser=a(c)||"unknown",e.version=b(navigator.userAgent)||b(navigator.appVersion)||"unknown",e.os=a(d)||"unknown",e.supportsCSS3Animation=function(){return!("Explorer"==e.browser&&e.version<10)},e}]),angular.module("evo.client",["ngCookies","evo.utils","evo.client.browser","evo.client.about"]),angular.module("evo.client").factory("evoClientData",["$cookies","evoUtils",function(a,b){var c={};try{c=JSON.parse(b.base64Encoder("atob","decode",a.clientData))}catch(d){c={config:{}}}return c.atob=function(a){return b.base64Encoder("atob","decode",a)},c.btoa=function(a){return b.base64Encoder("btoa","encode",a)},c}]),angular.module("evo.client.config",[]),angular.module("evo.client.config").factory("evoConfig",["evoClientData",function(a){var b={};return b.get=function(b,c){return a[b]||a.config[b]||c},b}]),angular.module("evo.locale",["i18n"]),angular.module("evo.templates",[]),angular.module("evo.templates").factory("evoTemplates",["$templateCache",function(a){var b={};return b.cacheTemplates=function(b){angular.isArray(b)&&b.length&&angular.forEach(b,function(b,c){a.get(b.name)||a.put(b.name,(b.reference?a.get(b.reference):b.content)||"")})},b}]),angular.module("evo.user",["ngCookies","evo.utils"]),angular.module("evo.user").factory("evoUser",["$cookies","evoUtils",function(a,b){var c={},d={};try{c.data=JSON.parse(b.base64Encoder("atob","decode",a.userData)).user,c.context=JSON.parse(a.contextData),d=c.data.product.roles.concat(Object.keys(c.data.product.settings.permissions).filter(function(a){return c.data.product.settings.permissions[a]}))}catch(e){}return c.isLoggedIn=!!c.data,c.atob=function(a){return b.base64Encoder("atob","decode",a)},c.btoa=function(a){return b.base64Encoder("btoa","encode",a)},c.hasPrivilege=function(a){return d.indexOf(a)>=0},c.hasSomePrivileges=function(a){for(var b=0,d=a.length;d>b;b++)if(c.hasPrivilege(a[b]))return!0;return!1},c.hasAllPrivileges=function(a){for(var b=0,d=a.length;d>b;b++)if(!c.hasPrivilege(a[b]))return!1;return!0},c}]),angular.module("evo.user.validation",["evo.utils"]),angular.module("evo.user.validation").factory("evoValidation",["evoRegExp",function(a){function b(a){return-1!=a.search(/[a-z]/)}function c(a){return-1!=a.search(/[A-Z]/)}function d(a){return-1!=a.search(/[0-9]/)}function e(b){return-1!=b.search(a.specialChar)}var f={};return f.passwordStrength=function(a){if(string.isEmptyStr(a)||a.length<8)return 0;var f=0;f+=b(a)?26:0,f+=c(a)?26:0,f+=d(a)?10:0,f+=e(a)?20:0;var g=Math.pow(f,a.length);return g<Math.pow(56,8)?0:g<Math.pow(56,11)?1:g<Math.pow(56,15)?2:3},f}]),angular.module("evo.utils",[]),angular.module("evo.utils").value("evoRegExp",{specialChar:/(?!^[0-9a-zA-Z]*$)(^.*$)/,email:/^([a-z0-9_\.-]+)@([\da-z\.-]+)\.([a-z\.]{2,6})$/,username:/^[a-z0-9_-]{3,16}$/,password:/^[a-z0-9_-]{6,18}$/,hexValue:/^#?([a-f0-9]{6}|[a-f0-9]{3})$/,url:/^(https?:\/\/)?([\da-z\.-]+)\.([a-z\.]{2,6})([\/\w \.-]*)*\/?$/,htmlTag:/^<([a-z]+)([^<]+)*(?:>(.*)<\/\1>|\s+\/>)$/,emptyString:/[^\s]+/}).value("evoStrings",{letters:"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",digits:"0123456789",hexdigits:"0123456789abcdefABCDEF",octdigits:"01234567",punctuation:"!\"#$%&'()*+,-./:;<=>?@[\\]^_`{|}~",whitespace:" 	\n\r\f"}).factory("evoUtils",["$window","evoStrings",function(a,b){var c={};return c.sprintf=function(){for(var a=angular.isArray(arguments[0])?arguments[0]:arguments,b=1,c=a.length,d=a[0];c>b;b++)d=d.replace(/%s/i,a[b]);return d},c.getRandString=function(a,d){var e=b.letters+b.digits+(d&&b.punctuation||""),f=[];for(isNaN(a)&&(a=16);f.length!==a;)f.push(e[Math.floor(c.randRange(0,e.length))]);return f.join("")},c.base64Encoder=function(b,c,d){return(a[b]?a[b]:base64[c])(d)},c.randRange=function(a,b){return Number(a+Math.random()*(b-a+1))},c.getMaxNum=function(a){return Math.max.apply(null,angular.isArray(a)?a:arguments)},c.getMinNum=function(a){return Math.min.apply(null,angular.isArray(a)?a:arguments)},c.roundNumber=function(a,b){if(isNaN(a)||isNaN(b))throw new Error("Incorrect argument type(s).");var c=Math.pow(10,b);return Math.round(a*c)/c},c}]),angular.module("evo.utils.uuid",[]),angular.module("evo.utils.uuid").factory("evoUUID",[function(){function a(a){for(var b=0,c="";a>b;b++)c+=Math.floor(16*Math.random()).toString(16).toUpperCase();return c}var b={};return b.uuid4=function(){for(var b=[],c=0;20>=c;c++)c>=8&&(8===c?b.push(a(8)):c%4===0&&b.push(a(4)));return b.push(a(12)),b.join("-")},b}]);var c={}||c;c.version=" ",c.module=function(a,b){var c;try{c=angular.module(a)}catch(d){c=angular.module(a,b||[])}return c},window.evo=c,angular.module("evo",["evo.utils","evo.client","evo.user","evo.api","evo.locale","evo.templates"])}({},function(){return this}());